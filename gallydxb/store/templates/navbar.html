{% load static %}

<!-- Desktop Header -->
<header class="header transparent-header">
  <div class="header_inner d-flex flex-row align-items-center justify-content-between">
    <div class="logo">
      <a href="{% url 'home' %}">
        <img src="{% static 'images/gally_logo.png' %}" alt="Gally Logo" class="gally-header">
      </a>
    </div>
    
    <nav class="main_nav">
      <ul class="navbar-nav d-flex flex-row gap-3 align-items-center">

        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">HOME</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">ABOUT</a></li>

        <!-- BRANDS DROPDOWN -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="brandsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            BRANDS
          </a>
          <ul class="dropdown-menu" aria-labelledby="brandsDropdown">
            {% for brand in brands %}
              <li><a class="dropdown-item" href="{% url 'brand' brand.slug %}">{{ brand.name }}</a></li>
            {% endfor %}
          </ul>
        </li>

        <!-- PRODUCTS DROPDOWN -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="productsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            PRODUCTS
          </a>
          <ul class="dropdown-menu" aria-labelledby="productsDropdown">
            <li><a class="dropdown-item" href="{% url 'products' %}">ALL PRODUCTS</a></li>
            <li><hr class="dropdown-divider"></li>
            {% for category in categories %}
              <li><a class="dropdown-item" href="{% url 'category' category.slug %}">{{ category.name }}</a></li>
            {% endfor %}
          </ul>
        </li>

        <li class="nav-item"><a class="nav-link" href="{% url 'collab' %}">COLLAB.</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'store' %}">STORE</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">GET IN TOUCH</a></li>

      </ul>
    </nav>
  </div>
</header>


<!-- Mobile Header -->
<div class="mobile_header d-flex justify-content-between align-items-center">
  <div class="mobile_logo d-flex align-items-center">
    <a href="{% url 'home' %}">
      <img src="{% static 'images/gally_logo.png' %}" alt="Gally Logo">
    </a>
  </div>
  <div class="burger_container d-flex flex-column align-items-center justify-content-around menu_mm">
    <div></div><div></div><div></div>
  </div>

  <!-- Mobile Menu -->
  <div class="menu d-flex flex-column align-items-end justify-content-start text-right menu_mm trans_400">
    
      <i class="bi bi-x-lg close_icon menu_close_btn"></i>

    
    <div class="logo">
      <a href="{% url 'home' %}">
        <img src="{% static 'images/gally_logo.png' %}" alt="Gally Logo" class="gally-menu">
      </a>
    </div>
    <nav class="menu_nav">
      <ul class="menu_mm">
        <li><a href="{% url 'home' %}">HOME</a></li>
        <li><a href="{% url 'about' %}">ABOUT</a></li>


        <!-- BRANDS Dropdown -->
<li class="mobile-dropdown">
  <span class="mobile-dropdown-toggle">
    BRANDS
    <i class="bi bi-caret-right-fill dropdown-arrow"></i>
  </span>
  <ul class="mobile-submenu">
    {% for brand in brands %}
      <li><a href="{% url 'brand' brand.slug %}" style="font-size: 20px; font-weight: 50;">{{ brand.name }}</a></li>
    {% endfor %}
  </ul>
</li>

        
<!-- PRODUCTS Dropdown -->
<li class="mobile-dropdown">
  <span class="mobile-dropdown-toggle">
    PRODUCTS
    <i class="bi bi-caret-right-fill dropdown-arrow"></i>
  </span>
  <ul class="mobile-submenu">
    <li><a href="{% url 'products' %}" style="font-size: 20px; font-weight: 50;">ALL PRODUCTS</a></li>
    {% for category in categories %}
      <li><a href="{% url 'category' category.slug %}" style="font-size: 20px; font-weight: 50;">{{ category.name }}</a></li>
    {% endfor %}
  </ul>
</li>    
        



        <li><a href="{% url 'collab' %}">COLLAB.</a></li>
        <li><a href="{% url 'store' %}">STORE</a></li>
        <li><a href="{% url 'contact' %}">GET IN TOUCH</a></li>
      </ul>
    </nav>
  </div>
</div>

<style>
/* === HEADER VISIBILITY CONTROL === */

/* Show desktop header by default */
.header {
  display: flex;
}

/* Hide mobile header by default */
.mobile_header {
  display: none !important;
  height: 0 !important;
  overflow: hidden;
}

.menu {
  display: none !important;
}

.menu.active {
  display: flex !important;
}


@media (max-width: 991px) {
  .mobile_header.header-scrolled {
   padding: 5px 15px;
    height: 30px;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    background: rgba(0, 0, 0, 0.4) !important;
    transition: all 0.3s ease;
	
  }

  .mobile_header.header-scrolled .mobile_logo {
	height: 60px; /* Reduce logo size when scrolled */
	width: 70px;
	margin-top: 5px;
	margin-left: 5px;
  }

   .mobile_header.header-scrolled .mobile_logo img {
    height: 100%; /* Reduce logo size when scrolled */
	width: 100%;
	margin-top: 20px;
	margin-left: 5px;
  }

  .mobile_header.header-scrolled .burger_container {
    top: 15px; /* Adjust burger vertical position */
	margin-top: 15px;
	height: 20px;
	width: 25px;
  }
}


/* Show mobile header only on smaller screens */
@media (max-width: 991px) {
  .header_inner {
    display: none !important;
  }

  .mobile_header {
  display: flex !important;
  height: auto !important;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 10px 15px;
  z-index: 1100;
  background: transparent !important;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
}





  .mobile_logo {
    max-width: 50%;
	top: -10px;
    left: 0;
  }

  .mobile_logo img {
    height: 100px;
    width: auto;
    max-width: 100%;
	
  }

  .burger_container {
  width: 30px;
  height: 27px;
  display: flex !important;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  position: absolute;
  top: 30px;
  right: 30px;
  z-index: 1200;
}

 .burger_container div {
  background: #ffffff !important;
  height: 3px;
  width: 100%;
  margin: 0;
}


  /* Hide burger when menu is open */
  body.menu-open .burger_container {
    display: none !important;
  }







.close_icon {
  font-size: 24px;
  color: white;
  margin-top: 3px;
  margin-right: 10px;
}




}








/* Menu background styling */
.menu {
  
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  top: 0;
  transition: top 0.3s ease;

  max-height: 100vh;
  overflow-y: auto;
  overscroll-behavior: contain;
  width: 100%;
}

.menu.menu-scrolled {
  top: 60px !important;
}

.menu_nav ul li {
  margin-bottom: 20px; 
}

/* Menu text color */
.menu_nav ul li a {
  color: white !important;
  font-size: 25px;

}

/* Close button styling */
.menu_close div {
  background: white !important;
  height: 2px;
  width: 20px;
  
}

/* Fix body white space */
body, html {
  margin: 0 !important;
  padding: 0 !important;
}

body.menu-open {
  overflow: hidden;
  height: 100vh;
}


/* Mobile Dropdown Styling */
.mobile-dropdown > .mobile-dropdown-toggle {
  font-size: 25px;
  color: white;
  cursor: pointer;
  display: inline-block;
  margin-bottom: 10px;
  position: relative;
  letter-spacing: 5px;
}

.mobile-submenu {
  display: none;
  list-style: none;
  padding-left: 20px;
}

.mobile-submenu li a {
  font-size: 25px;
  color: white;
  text-decoration: none;
}

.mobile-dropdown.open > .mobile-submenu {
  display: block;
}

.menu_nav ul li a,
.mobile-dropdown > .mobile-dropdown-toggle {
  font-weight: bold;
}

/* Remove bold from submenu items */
.mobile-submenu li a {
  font-weight: 100;
}


.mobile-dropdown-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  color: white;
}

.dropdown-arrow {
  margin-left: 10px;
  font-size: 20px;
  transition: transform 0.3s ease;
}

.mobile-submenu {
  display: none;
  list-style: none;
  padding-left: 20px;
}

.mobile-dropdown.open > .mobile-submenu {
  display: block;
}

.mobile-submenu li a {
  font-weight: 100;
}



</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const burger = document.querySelector('.burger_container');
  const menu = document.querySelector('.menu');
  const closeIcon = document.querySelector('.menu_close_btn');

  burger.addEventListener('click', () => {
    menu.classList.add('active');
    document.body.classList.add('menu-open');
  });

  closeIcon.addEventListener('click', () => {
    menu.classList.remove('active');
    document.body.classList.remove('menu-open');

    // Re-show burger manually after closing menu
    const burgerContainer = document.querySelector('.burger_container');
    burgerContainer.style.display = 'flex';
  });



   document.querySelectorAll('.mobile-dropdown-toggle').forEach(toggle => {
  toggle.addEventListener('click', function (e) {
    e.stopPropagation();
    const parent = this.closest('.mobile-dropdown');
    parent.classList.toggle('open');

    const arrowIcon = this.querySelector('.dropdown-arrow');
    if (parent.classList.contains('open')) {
      arrowIcon.classList.remove('bi-caret-right-fill');
      arrowIcon.classList.add('bi-caret-down-fill');
    } else {
      arrowIcon.classList.remove('bi-caret-down-fill');
      arrowIcon.classList.add('bi-caret-right-fill');
    }
  });
});


});
</script>
